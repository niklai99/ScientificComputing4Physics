# Task 3 Build and Run Guide

## How to Build the Project

Assuming you already have the project available locally, then execute the build script from the project root directory:

```bash
bash ./scripts/buildProject.sh
```

This script performs the following steps:

- **Creates a Build Directory:**

  It checks for the existence of the `build/` directory and creates it if necessary.

- **CMake Configuration:**

  It changes into the `build/` directory and runs `cmake ..` to generate the build system. CMake reads the `CMakeLists.txt` file (which sets the C++ standard, compiler flags, output directories, and dependency configuration) and configures the project.

- **Compilation with Make:**

  It then calls `make` to compile the source code into executables, which are placed in `build/bin`.

- **Run Script Configuration:**

  During the CMake process, a run script is generated from the template in `commands/run.in` and copied to `/usr/local/bin` for easy access.

- **Return to Project Root:**

  After the build completes, the script returns you to the project root.



## How to Run the Executables

After building, you can run the executables using the globally installed `run` wrapper script. This script simplifies execution by automatically setting the correct working directory and locating the executables.


### Examples

- **Generate Vectors:**

  To create two vectors of dimension N (in this case N=10) with constant values (x = 0.1 and y = 7.1) and write them to files, use the following command:

  ```bash
  run generateVectors 10 ./data/input/vector.h5
  ```

  This command generates the files:

  - `./data/input/vector_N10_x.h5`
  - `./data/input/vector_N10_y.h5`

  The extension of the filename determines the file format (plain text, HDF5, or binary). 
  
  To generate a binary file, use the `.dat` extension.

  ```bash
  run generateVectors 10 ./data/input/vector.dat
  ```

  To generate a plain text file, use the `.txt` extension.

  ```bash
  run generateVectors 10 ./data/input/vector.txt
  ```

- **Compute Vector Sum:**

  To compute the vector sum using the configuration file `config/config.yml`, run the following command:

  ```bash
  run vectorSum ./config/config.yml
  ```

  The result is written to a file in the output directory as defined by the configuration.


## The Configuration File

The configuration file `config/config.yml` specifies the input files for vectors x and y, the number of elements (N), the scalar multiplier (a), the output directory and prefix, the desired output format, and the implementation to use.

```yaml
# Configuration file for ScientificComputing4Physics Task 3.
# This file controls both the input and output file locations, 
# the number of elements to process, the scalar multiplier for the vector sum,
# the desired output file format, and the implementation to use.

input:
  # Path to the file containing vector x.
  # (Relative to the project root.)
  vector_x: "./data/input/vector_N10_x.txt"
  
  # Path to the file containing vector y.
  vector_y: "./data/input/vector_N10_y.txt"
  
  # The expected number of elements in each vector.
  N: 10
  
  # The scalar multiplier used in the vector sum operation (d = a*x + y).
  a: 3.0

output:
  # Directory where the output file will be stored.
  # (A trailing slash is automatically ensured by the code.)
  path: "./data/output"
  
  # The prefix for the output file.
  # The final output filename will be constructed as:
  # <output_path><prefix>_N<value>_d.<format>
  prefix: "result"
  
  # Desired file format for output.
  # Options:
  #   "dat" - plain text file (default if no extension provided)
  #   "txt" - plain text file
  #   "h5"  - HDF5 file format (uses HDF5 C++ API)
  format: "dat"

# Implementation selection for the vector sum operation.
# Options:
#   "default" - Use the standard C++ implementation.
#   "gsl"     - Use the GNU Scientific Library (GSL) based implementation.
implementation: "gsl"
```


## Project Structure 


Below is the overall directory layout of the project _after_ building:

```plaintext
project/                 # Project root directory
├── build/               # Generated by CMake (do not ship)
│   ├── bin/             # Compiled executables (generateVectors, vectorSum)
│   ├── commands/        # Generated run script ("run")
│   ├── ...              # Other CMake build files
│   └── Makefile         # Makefile for building the project
├── commands/            # Contains the run script template
│   └── run.in          # Script to run executables with the correct environment
├── config/              # Configuration files
│   └── config.yml      # Example configuration file
├── docker/              # Docker build context
│   └── Dockerfile.alma9# Dockerfile for building the project
├── include/             # Header files
│   ├── HelperFunctions.hpp      # Common helper functions for file/path operations
│   ├── VectorIO.hpp             # I/O helper functions for reading/writing vectors
│   ├── VectorSumInterface.hpp   # Abstract interface for vector sum computation
│   ├── VectorSumDefault.hpp     # Default (elementwise) vector sum implementation
│   └── VectorSumGSL.hpp         # GSL-based vector sum implementation
├── scripts/             # Helper scripts
│   ├── buildProject.sh          # Script to build the project from scratch
│   ├── destroyProject.sh        # Script to completely clean the project
├── src/                 # Source code files
│   ├── generateVectors.cpp     # Code to generate input vectors (supports txt/dat/h5)
│   ├── vectorSum.cpp           # Code to compute vector sum (selects implementation at runtime)
├── CMakeLists.txt       # CMake build configuration file
└── README.md            # Project documentation
```



<!-- # Scientific Computing for Physics Students – Task 3

## Overview

This project demonstrates a complete scientific computing example involving vector operations. It has two main components:

1. **Generate Vectors:**  

   The `generate_vectors` executable creates two vectors (x and y) of dimension N with constant values (x = 0.1 and y = 7.1) and writes them to files. The file format (plain text or HDF5) is determined by the file extension provided in the filename prefix.

   - **Usage Example:**  

     ```bash
     run generateVectors 10 ./data/input/vector.h5
     ```

     This command generates the files:

     - `./data/input/vector_N10_x.h5`
     - `./data/input/vector_N10_y.h5`

2. **Compute Vector Sum:**  

   The `vector_sum` executable reads a YAML configuration file (e.g., `config/config.yml`) that specifies the input files for vectors x and y, the number of elements (N), the scalar multiplier (a), the output directory and prefix, and the desired output format. It then computes the vector sum using one of two implementations (default or GSL-based) and writes the result to an output file.

   - **Usage Example:**  

     ```bash
     run vectorSum ./config/config.yml
     ```

     The result is written to a file in the output directory as defined by the configuration.

## Configuration

An example configuration file (`config/config.yml`):

```yaml
input:
  vector_x: "./data/input/vector_N10_x.txt"  # or "./data/input/vector_N10_x.h5" or "./data/input/vector_N10_x.dat"
  vector_y: "./data/input/vector_N10_y.txt"  # or "./data/input/vector_N10_y.h5" or "./data/input/vector_N10_y.dat"
  N: 10
  a: 3.0
output:
  path: "./data/output"         # Output directory
  prefix: "result"              # Output file prefix
  format: "dat"                 # Output format: "dat", "txt", or "h5"
implementation: "gsl"           # Implementation: "default" or "gsl"
```

## Project Structure

After building the project, the directory structure will look like this:

```plaintext
project/                 # Project root directory
├── build/                   # Generated by CMake (do not ship)
│   ├── bin/                     # Compiled executables (generate_vectors, vector_sum)
│   ├── commands/                # Generated run script ("run")
│   ├── ...                      # Other CMake build files
│   └── Makefile                 # Makefile for building the project
├── commands/                # Contains the run script template
│   └── run.in                   # Script to run executables with the correct environment
├── config/                  # Configuration files
│   └── config.yml/              # Example configuration file
├── docker/                  # Docker build context
│   └── Dockerfile.alma9         # Dockerfile for building the project
├── include/                 # Header files
│   ├── HelperFunctions.hpp      # Common helper functions for file/path operations
│   ├── VectorIO.hpp             # I/O helper functions for reading/writing vectors
│   ├── VectorSumInterface.hpp   # Abstract interface for vector sum computation
│   ├── VectorSumDefault.hpp     # Default (elementwise) vector sum implementation
│   └── VectorSumGSL.hpp         # GSL-based vector sum implementation
├── scripts/                 # Helper scripts
│   ├── buildProject.sh          # Script to build the project from scratch
│   ├── destroyProject.sh        # Script to completely clean the project
├── src/                     # Source code files
│   ├── generate_vectors.cpp     # Code to generate input vectors (supports txt/dat/h5)
│   ├── vector_sum.cpp           # Code to compute vector sum (selects implementation at runtime)
├── CMakeLists.txt               # CMake build configuration file
└── README.md                    # Project documentation
```

## How to Build and Run the Project

1. **Run the Build Script:**  

   Execute the `buildProject.sh` script to build the project:

   ```bash
   bash ./scripts/buildProject.sh
   ```

2. **Run the Executables:**

   The project installs a wrapper script named `run` in `/usr/local/bin` during the build process. This script lets you invoke your executables using paths relative to the project root.

   - **Example to Generate Vectors:**

     ```bash
     run generateVectors 10 ./data/input/vector.h5
     ```

   - **Example to Compute Vector Sum:**

     ```bash
     run vectorSum ./config/config.yml
     ```

## How to Clean the Project

To remove all build artifacts and executables, run the `destroyProject.sh` script:

```bash
bash ./scripts/destroyProject.sh
```

This script deletes the build directory and removes `/usr/local/bin/run`, allowing you to rebuild from scratch. -->